(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;a=300,i=0,p=0,l=!1,n=[],e=$(""),h=function(a){return a},b=null,f=0,g=function(a){return p+=1,$.ajax({url:"/guts_round_update",dataType:"json",success:function(b){for(var c=[5,5,5,7,7,7,9,9,9,11,11,11,13,13,13,15,15,15,18,18,18,22,22,22],d=0;d<b.teams.length;++d)if(b.teams[d].score=0,b.teams[d].progress=0,b.teams[d].scores){b.teams[d].scores=JSON.parse(b.teams[d].scores),console.log(b.teams[d].scores);for(var e=0;e<b.teams[d].scores.length;++e)b.teams[d].scores[e]&&(b.teams[d].score+=c[e]),b.teams[d].progress+=c[e]}return b.teams.sort(function(a,b){return b.score-a.score}),a(b.teams,function(){return g(a)})}})},m=function(a){return $.ajax({url:"/guts_time_sync",dataType:"json",success:function(b){return a(b),setTimeout(function(){return m(a)},1e4)}})},o=function(a,b){var c,d,e;return c=a.toString(),c.length<b?(d=function(){var a,d,f;for(f=[],e=a=1,d=b-c.length;d>=1?d>=a:a>=d;e=d>=1?++a:--a)f.push("0");return f}().join(""),d+c):c},$("#search_wrapper").hide(),d=function(a){var b,c;return b=Math.floor(a/3600),a-=3600*b,c=Math.floor(a/60),a-=60*c,o(b,2)+":"+o(c,2)+":"+o(a,2)},c=function(b,c){return $("<div>").addClass("team_wrapper").append($("<div>").addClass("team").append($("<div>").addClass("team_name").text(b.name)).append($("<div>").addClass("team_score").text(b.score+"/"+b.progress+" #"+c)).append($("<div>").addClass("team_bar").append($("<div>").addClass("team_scorebar").width(b.score/a*100+"%")).append($("<div>").addClass("team_progressbar").width((b.progress-b.score)/a*100+"%")).append($("<div>").addClass("team_fullbar").width(100*(1-b.progress/a)+"%"))))},k=function(a){var c,d,f,g;for(a=a.toLowerCase(),c=a.length,f=0,g=n.length;g>f;f++)if(d=n[f],d.name.slice(0,+(c-1)+1||9e9).toLowerCase()===a)return l=!0,e=d.el,b.scrollTop(d.el.addClass("highlighted").offset().top),function(){return k(a)};return function(a){return a}},j=function(a){var c,d,f;for(a=a.toLowerCase(),d=0,f=n.length;f>d;d++)if(c=n[d],c.name.toLowerCase()===a)return l=!0,e=c.el,b.scrollTop(c.el.addClass("highlighted").offset().top),function(){return j(a)};return function(a){return a}},window.onload=function(){var a,o,q,r,s,t;return m(function(a){return i=a.time}),t=$("div#timer"),s=setInterval(function(){return 0>i&&(i=0,clearInterval(s),t.css("color","red")),t.text(d(i)),i-=1},1e3),q=$("div#body"),b=$(document.body),o=0,a=0,r=function(a,c,d){b.scrollTop(f),setTimeout(function(){if(!l){var b=0;$(".team_wrapper").each(function(a){$(this).offset().top<window.innerHeight+f&&(b=Math.max($(this).offset().top,b))}),f=b}d===!0?(f=0,a()):f>o||(new Date).getTime()-c>3e4?r(a,c,!0):setTimeout(r(a,c,!1),5e3)},5e3)},$(window).scroll(function(){return Math.abs(b.scrollTop()-f)>2?f=b.scrollTop():void 0}),g(function(a,b){var d,e,f,g,i;for(n.length=0,q.html(""),p%2===1?(a.sort(function(a,b){return a.name>b.name?1:-1}),i=a.slice(0).sort(function(a,b){return a.score<b.score?1:-1})):(i=a,a.sort(function(a,b){return a.score<b.score?1:-1})),f=0,g=a.length;g>f;f++)e=a[f],d=c(e,i.indexOf(e)+1),q.append(d),n.push($.extend({el:d},e));return h(),o=q.height()-window.innerHeight,r(b,(new Date).getTime())}),$("#search").keyup(function(a){return e.removeClass("highlighted"),e=$(""),0===this.value.length?(l=!1,void(h=function(a){return a})):h=13===a.keyCode?j(this.value):k(this.value)})}}).call(this);
//# sourceMappingURL=scoreboard.min.js.map