(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;k=$("#password"),p=$("#round"),g=$("#id"),e=$("#guts-round"),r=$("#submit"),l=$("#password-control"),h=$("#id-control"),f=$("#guts-round-control"),b=$("#checkboxes"),c=[],j={speed:20,accuracy:10,team:15},t=function(a,b){var c;return c=!1,""===a?(l.addClass("has-error"),c=!0):l.removeClass("has-error"),""===b?(h.addClass("has-error"),c=!0):h.removeClass("has-error"),!c},q=function(){var a;return a=[],$("input[type=checkbox]").map(function(b,c){return a.push(c.checked)}),a},s=function(){var a,b,d,e,f;for(a=q(),$("#diff").text("Conflicts: "),f=[],b=d=0,e=c.length;e>=0?e>d:d>e;b=e>=0?++d:--d)f.push(c[b]!==a[b]?$("#diff").append(b+1+", "):void 0);return f},o=0,i=0,d=function(){return t(k.val(),g.val())?(o++,$.ajax({url:"/grade",method:"POST",data:{password:k.val(),round:p.val(),id:g.val(),guts_round:e.val(),score:JSON.stringify(q())},dataType:"json",success:function(a){return function(b){return a>i?(b.success?($("input[type=checkbox]").prop("checked",!1),m(),g.val("")):"password"===b.problem?(k.val(""),l.addClass("has-error")):"id"===b.problem&&(g.val(""),h.addClass("has-error")),i=a):void 0}}(o)})):void 0},r.click(d),m=function(){var a,d,e;if(b.empty(),"guts"!==p.val()){for(a=d=1,e=j[p.val()];e>=1?e>=d:d>=e;a=e>=1?++d:--d)b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>"));f.addClass("hidden")}else f.removeClass("hidden"),n();return $("#graded").text(""),c=[],s()},n=function(){var a,c,d,f,g;for(b.empty(),g=[],a=c=d=3*parseInt(e.val())-2,f=3*parseInt(e.val());f>=d?f>=c:c>=f;a=f>=d?++c:--c)g.push(b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>")));return g},a=function(){return $.ajax({url:"/check",method:"GET",data:{round:p.val(),id:g.val(),guts_round:e.val()},success:function(a){var b;return b=JSON.parse(a.scores),$("#graded").text(a.name),c=b&&b.length>0?b:[],s()}})},m(),p.change(m),e.change(n),g.keyup(a),b.change(s)}).call(this);
//# sourceMappingURL=grading.min.js.map