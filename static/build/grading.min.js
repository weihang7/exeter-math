(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;p=$("#password"),m=$("#round"),g=$("#id"),e=$("#guts-round"),o=$("#submit"),j=$("#password-control"),h=$("#id-control"),f=$("#guts-round-control"),b=$("#checkboxes"),c=[],i={speed:20,accuracy:10,team:15},r=function(a,b){var c;return c=!1,""===a?(j.addClass("has-error"),c=!0):j.removeClass("has-error"),""===b?(h.addClass("has-error"),c=!0):h.removeClass("has-error"),!c},n=function(){var a;return a=[],$("input[type=checkbox]").map(function(b,c){return a.push(c.checked)}),a},q=function(){var a,b,d,e,f;for(a=n(),$("#diff").text("Conflicts: "),f=[],b=d=0,e=c.length;e>=0?e>d:d>e;b=e>=0?++d:--d)f.push(c[b]!==a[b]?$("#diff").append(b+1+", "):void 0);return f},d=function(){return r(password.val(),g.val())?$.ajax({url:"/grade",method:"POST",data:{password:password.val(),round:m.val(),id:g.val(),guts_round:e.val(),score:JSON.stringify(n())},dataType:"json",success:function(a){return a.success?($("input[type=checkbox]").prop("checked",!1),g.val("")):"password"===a.problem?(password.val(""),j.addClass("has-error")):"id"===a.problem?(g.val(""),h.addClass("has-error")):void 0}}):void 0},o.click(d),k=function(){var a,d,e;if(b.empty(),"guts"!==m.val()){for(a=d=1,e=i[m.val()];e>=1?e>=d:d>=e;a=e>=1?++d:--d)b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>"));f.addClass("hidden")}else f.removeClass("hidden"),l();return $("#graded").text(""),c=[],q()},l=function(){var a,c,d,f,g;for(b.empty(),g=[],a=c=d=3*parseInt(e.val())-2,f=3*parseInt(e.val());f>=d?f>=c:c>=f;a=f>=d?++c:--c)g.push(b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>")));return g},a=function(){return $.ajax({url:"/check",method:"GET",data:{round:m.val(),id:g.val(),guts_round:e.val()},success:function(a){var b;return b=JSON.parse(a.scores),$("#graded").text(a.name),b&&b.length>0&&(c=b),q()}})},k(),m.change(k),e.change(l),g.keyup(a),b.change(q)}).call(this);
//# sourceMappingURL=grading.min.js.map