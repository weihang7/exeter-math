(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;k=$("#password"),p=$("#round"),g=$("#id"),e=$("#guts-round"),r=$("#submit"),l=$("#password-control"),h=$("#id-control"),f=$("#guts-round-control"),b=$("#checkboxes"),c=[],j={speed:20,accuracy:10,team:15},t=function(a,b){var c;return c=!1,""===a?(l.addClass("has-error"),c=!0):l.removeClass("has-error"),""===b?(h.addClass("has-error"),c=!0):h.removeClass("has-error"),!c},q=function(){var a;return a=[],$("input[type=checkbox]").map(function(b,c){return a.push(c.checked)}),a},s=function(a){var b,d,f,g,h,i,j,k,l,m;if(b=q(),$("#diff").text("Conflicts: "),"guts"!==p.val()){for(k=[],d=f=0,h=c.length;h>=0?h>f:f>h;d=h>=0?++f:--f)c[d]!==b[d]?k.push($("#diff").append(d+1+", ")):k.push(void 0);return k}for(m=parseInt(e.val()),l=[],d=g=i=3*m-3,j=3*m;j>=i?j>g:g>j;d=j>=i?++g:--g)c[d]!==b[d-(3*m-3)]?l.push($("#diff").append(d+1+(d!==3*m-1?", ":""))):l.push(void 0);return l},o=0,i=0,d=function(){return t(k.val(),g.val())?(o++,$.ajax({url:"/grade",method:"POST",data:{password:k.val(),round:p.val(),id:g.val(),guts_round:e.val(),score:JSON.stringify(q())},dataType:"json",success:function(a){return function(b){return a>i?(b.success?($("input[type=checkbox]").prop("checked",!1),m(),g.val("")):"password"===b.problem?(k.val(""),l.addClass("has-error")):"id"===b.problem&&(g.val(""),h.addClass("has-error")),i=a):void 0}}(o)})):void 0},r.click(d),m=function(){var a,d,e;if(b.empty(),"guts"!==p.val()){for(a=d=1,e=j[p.val()];e>=1?e>=d:d>=e;a=e>=1?++d:--d)b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>"));f.addClass("hidden")}else f.removeClass("hidden"),n();return $("#graded").text(""),c=[],s()},n=function(){var a,c,d,f;for(b.empty(),a=c=d=3*parseInt(e.val())-2,f=3*parseInt(e.val());f>=d?f>=c:c>=f;a=f>=d?++c:--c)b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>"));return s()},a=function(){return $.ajax({url:"/check",method:"GET",data:{round:p.val(),id:g.val()},dataType:"json",success:function(a){var b;return b=a.scores,$("#graded").text(a.name),c=b&&b.length>0?JSON.parse(b):[],s()}})},m(),p.change(m),e.change(n),g.keyup(a),b.change(s)}).call(this);
//# sourceMappingURL=grading.min.js.map