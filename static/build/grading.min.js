(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;i=$("#password"),m=$("#round"),f=$("#id"),d=$("#guts-round"),o=$("#submit"),j=$("#password-control"),g=$("#id-control"),e=$("#guts-round-control"),b=$("#checkboxes"),h={speed:25,accuracy:8,team:10},p=function(a,b){var c;return c=!1,""===a?(j.addClass("has-error"),c=!0):j.removeClass("has-error"),""===b?(g.addClass("has-error"),c=!0):g.removeClass("has-error"),!c},n=function(){var a;return a=[],$("input[type=checkbox]").map(function(b,c){return a.push(c.checked)}),a},c=function(){return p(i.val(),f.val())?$.ajax({url:"/grade",method:"POST",data:{password:i.val(),round:m.val(),id:f.val(),guts_round:d.val(),score:JSON.stringify(n())},dataType:"json",success:function(a){return a.success?($("input[type=checkbox]").prop("checked",!1),f.val("")):"password"===a.problem?(i.val(""),j.addClass("has-error")):"id"===a.problem?(f.val(""),g.addClass("has-error")):void 0}}):void 0},o.click(c),k=function(){var a,c,d;if(b.empty(),"guts"!==m.val()){for(a=c=1,d=h[m.val()];d>=1?d>=c:c>=d;a=d>=1?++c:--c)b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>"));return e.addClass("hidden")}return e.removeClass("hidden"),l()},l=function(){var a,c,e,f,g;for(b.empty(),g=[],a=c=e=3*parseInt(d.val())-2,f=3*parseInt(d.val());f>=e?f>=c:c>=f;a=f>=e?++c:--c)g.push(b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>")));return g},a=function(){return $.ajax({url:"/check",method:"GET",data:{round:m.val(),id:f.val(),guts_round:d.val()},success:function(a){var b,c,d,e;for(b=n(),$("#diff").clear(),c=d=0,e=a.scores.length;e>=0?e>d:d>e;c=e>=0?++d:--d)a.scores[c]!==b[c]&&$("#diff").append(c+1);return $("#graded").text(a.scores.length>0?a.name:"")}})},k(),m.change(k),d.change(l),f.keyup(a)}).call(this);
//# sourceMappingURL=grading.min.js.map