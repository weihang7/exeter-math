(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;j=$("#password"),n=$("#round"),g=$("#id"),e=$("#guts-round"),p=$("#submit"),k=$("#password-control"),h=$("#id-control"),f=$("#guts-round-control"),b=$("#checkboxes"),c=[],i={speed:20,accuracy:10,team:15},r=function(a,b){var c;return c=!1,""===a?(k.addClass("has-error"),c=!0):k.removeClass("has-error"),""===b?(h.addClass("has-error"),c=!0):h.removeClass("has-error"),!c},o=function(){var a;return a=[],$("input[type=checkbox]").map(function(b,c){return a.push(c.checked)}),a},q=function(){var a,b,d,e,f;for(a=o(),$("#diff").text("Conflicts: "),f=[],b=d=0,e=c.length;e>=0?e>d:d>e;b=e>=0?++d:--d)f.push(c[b]!==a[b]?$("#diff").append(b+1+", "):void 0);return f},d=function(){return r(j.val(),g.val())?$.ajax({url:"/grade",method:"POST",data:{password:j.val(),round:n.val(),id:g.val(),guts_round:e.val(),score:JSON.stringify(o())},dataType:"json",success:function(a){return a.success?($("input[type=checkbox]").prop("checked",!1),g.val("")):"password"===a.problem?(j.val(""),k.addClass("has-error")):"id"===a.problem?(g.val(""),h.addClass("has-error")):void 0}}):void 0},p.click(d),l=function(){var a,c,d;if(b.empty(),"guts"!==n.val()){for(a=c=1,d=i[n.val()];d>=1?d>=c:c>=d;a=d>=1?++c:--c)b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>"));return f.addClass("hidden")}return f.removeClass("hidden"),m()},m=function(){var a,c,d,f,g;for(b.empty(),g=[],a=c=d=3*parseInt(e.val())-2,f=3*parseInt(e.val());f>=d?f>=c:c>=f;a=f>=d?++c:--c)g.push(b.append($("<div class='checkbox'> <label>"+a+"<input type='checkbox'></label> </div>")));return g},a=function(){return $.ajax({url:"/check",method:"GET",data:{round:n.val(),id:g.val(),guts_round:e.val()},success:function(a){return c.length>0?($("#graded").text(a.name),c=JSON.parse(a.scores),q()):$("#graded").text("")}})},l(),n.change(l),e.change(m),g.keyup(a),b.change(q)}).call(this);
//# sourceMappingURL=grading.min.js.map